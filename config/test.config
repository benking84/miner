%% -*- erlang -*-
[
 "config/sys.config",
 {lager,
  [
   {log_root, "log"}
  ]},
 {blockchain,
  [
   {honor_quick_sync, false},
   {port, 0},
   {key, undefined},
   {num_consensus_members, 4},
   {base_dir, "data"},
   {seed_nodes, ""},
   {seed_node_dns, ""},
   {peerbook_update_interval, 60000},
   {peerbook_allow_rfc1918, true},
   {peer_cache_timeout, 20000},
   {sync_cooldown_time, 1},
   {skewed_sync_cooldown_time, 1}
  ]},
 {miner,
  [
   {use_ebus, false},
   {block_time, 500},
   {election_interval, 10},
   {dkg_stop_timeout, 15000},
   {write_failed_txns, true},
   {radio_device, undefined},
   {stabilization_period, 200},
   %% dont perform regionalised checks in test envs
   %% we only realy need the params below if this file is changed to specify a radio device
   %% as without one miner_lora is not started
   %% including the params anyway in case someone needs it in this env
   {region_override, 'US915'}
  ]},
    {grpcbox, [
        {servers, [
            #{
                grpc_opts => #{
                    service_protos => [validator_pb, validator_state_channels_pb],
                    services => #{
                       'helium.validator' => helium_validator,
                       'helium.validator_state_channels' => helium_validator_state_channels_service
                    }
                },
                transport_opts => #{ssl => false},
                listen_opts => #{
                    port => 8080,
                    ip => {0, 0, 0, 0}
                },
                pool_opts => #{size => 2},
                server_opts => #{
                    header_table_size => 4096,
                    enable_push => 1,
                    max_concurrent_streams => unlimited,
                    initial_window_size => 65535,
                    max_frame_size => 16384,
                    max_header_list_size => unlimited
                }
            }
        ]}
    ]}
].
